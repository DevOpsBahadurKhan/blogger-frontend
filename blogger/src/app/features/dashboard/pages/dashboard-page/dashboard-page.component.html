<div class="dashboard">
  <!-- Welcome Section -->
  <section class="header">
    <div class="title">
      <h2>Welcome{{ username ? ',' : '' }} {{ username || 'User' }}</h2>
      <div class="roles" *ngIf="roles.length">
        <span class="chip" *ngFor="let r of roles" [class]="'role-' + r.toLowerCase()">
          {{ r }}
        </span>
      </div>
    </div>
  </section>

  <!-- Quick Stats -->
  <section class="stats">
    <ng-container *ngFor="let s of stats">
      <mat-card 
        class="stat" 
        [style.border-top-color]="s.color"
        *ngIf="!s.roles || hasAnyRole(s.roles)">
        <div class="icon" [style.color]="s.color">
          <mat-icon>{{ s.icon }}</mat-icon>
        </div>
        <div class="meta">
          <div class="value">{{ s.value }}</div>
          <div class="label">{{ s.label }}</div>
        </div>
      </mat-card>
    </ng-container>
  </section>

  <!-- Quick Actions -->
  <section class="quick-actions">
    <h3>Quick Actions</h3>
    <div class="action-grid">
      <ng-container *ngFor="let action of quickActions">
        <mat-card 
          class="action-card"
          [routerLink]="action.link"
          *ngIf="!action.roles || hasAnyRole(action.roles)">
          <mat-icon color="primary">{{ action.icon }}</mat-icon>
          <h4>{{ action.title }}</h4>
          <p>{{ action.description }}</p>
        </mat-card>
      </ng-container>
    </div>
  </section>

  <!-- Role-Based Sections -->
  <ng-container *ngIf="hasRole('admin')">
    <section class="role-section">
      <h3>Admin Tools</h3>
      <div class="card-grid">
        <mat-card 
          *ngFor="let card of adminCards" 
          class="dashboard-card"
          [routerLink]="card.link">
          <mat-icon>{{ card.icon }}</mat-icon>
          <h4>{{ card.title }}</h4>
          <p>{{ card.description }}</p>
        </mat-card>
      </div>
    </section>
  </ng-container>

  <ng-container *ngIf="hasRole('editor')">
    <section class="role-section">
      <h3>Editor Tools</h3>
      <div class="card-grid">
        <mat-card 
          *ngFor="let card of editorCards" 
          class="dashboard-card"
          [routerLink]="card.link">
          <mat-icon>{{ card.icon }}</mat-icon>
          <h4>{{ card.title }}</h4>
          <p>{{ card.description }}</p>
        </mat-card>
      </div>
    </section>
  </ng-container>

  <ng-container *ngIf="hasRole('author')">
    <section class="role-section">
      <h3>Author Tools</h3>
      <div class="card-grid">
        <mat-card 
          *ngFor="let card of authorCards" 
          class="dashboard-card"
          [routerLink]="card.link">
          <mat-icon>{{ card.icon }}</mat-icon>
          <h4>{{ card.title }}</h4>
          <p>{{ card.description }}</p>
        </mat-card>
      </div>
    </section>
  </ng-container>

  <ng-container *ngIf="hasRole('reader')">
    <section class="role-section">
      <h3>Reader Tools</h3>
      <div class="card-grid">
        <mat-card 
          *ngFor="let card of readerCards" 
          class="dashboard-card"
          [routerLink]="card.link">
          <mat-icon>{{ card.icon }}</mat-icon>
          <h4>{{ card.title }}</h4>
          <p>{{ card.description }}</p>
        </mat-card>
      </div>
    </section>
  </ng-container>
</div>
